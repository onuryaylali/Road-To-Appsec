# February 1, 2026: Transport Layer Fundamentals & TCP State Machine

## 1. TCP vs UDP Analysis
* **Demultiplexing:** I studied how packets are delivered to the correct application using IP and Port (Source/Dest) headers.
* **Usage Scenarios:** TCP for reliability (HTTP, SSH); UDP for speed and low latency (DNS, VoIP, Gaming).

## 2. TCP 3-Way Handshake & ISN Security
Deep dive into the connection establishment phase and its security risks.

### ISN (Initial Sequence Number) Calculation
The ISN must be unpredictable to prevent hijacking. Modern systems use:
$$ISN = M + F(local\_port, local\_ip, remote\_port, remote\_ip)$$
* **M:** A time-dependent counter.
* **F:** A cryptographic hash function.
* **Security Risk:** If the ISN is predictable (**Weak ISN**), an attacker can perform a **TCP Sequence Prediction Attack** to inject malicious packets.

### Why 3-Way instead of 2-Way?
A two-stage process (SYN -> SYN/ACK) is insufficient because:
1. **Duplicate Data:** It prevents old, delayed SYN packets from initiating unwanted connections.
2. **Half-Open Connections:** It verifies that the client is actually present and ready before allocating server resources.



## 3. Error Handling & Flow Control
* **Timeout & Retransmit:** Mechanisms for handling lost packets.
* **Fast Retransmit:** Triggered by **3 duplicate ACKs**, allowing retransmission before the timeout expires.
* **Flow Control:** Using the **Window Size** to prevent overwhelming the receiver's buffer.
* **Congestion Control:** Preventing network collapse using **Slow Start** and **Congestion Avoidance** algorithms.